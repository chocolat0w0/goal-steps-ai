# goal-steps

目標達成のためのタスク管理を補助するアプリ。

## 入力するもの

### プロジェクトの設定

- 目標全体を表すプロジェクト名
- 目標達成の期限

#### プロジェクト設定の入力例

| 項目           | 値             |
| -------------- | -------------- |
| プロジェクト名 | ⚫︎⚫︎試験合格 |
| 期限           | 2025年12月31日 |

### カテゴリー

- 目標を分解したカテゴリーを複数設定可能
- カテゴリーごとの全体の量
- 計画時は最小単位ごとに分割して配分できる、基本は1
- カテゴリーに期限を設定した場合は、目標達成の期限より優先してそれまでに終わらせる計画にしなければならない

#### カテゴリーの入力例

| カテゴリー   | 値             | 期限           | 最小単位 |
| ------------ | -------------- | -------------- | -------- |
| 国語ワーク   | 20 - 60 ページ | -              | 2        |
| 国語プリント | 1- 10 枚       | 2025年12月15日 | 1        |
| 英語ワーク   | 30 - 60 ページ | -              | 2        |
| 模擬テスト   | 1 - 3 回       | -              | 1        |

### 計画への考慮

- 曜日や日別で配分量を 多め・普通・少なめ・なし から選べる
- 自動計画するときにこれに沿って配分量を調整する

#### 曜日別配分設定

各曜日に対して以下の4つの選択肢から設定可能：

- **多め**: 通常の1.5倍の作業量を割り当て
- **普通**: 通常の1倍の作業量を割り当て（デフォルト）
- **少なめ**: 通常の0.5倍の作業量を割り当て
- **なし**: その日は作業を行わない

## 自動計算

- 入力内容を元に、目標期限まででタスクを分割して配置する
- タスクは最小単位ごとにブロック状にして日毎に配分する
- カテゴリーごとに配置する
- 曜日別配分設定に基づいたスケジューリング
- カテゴリー固有の期限を考慮した優先度調整
- 作業可能日数の自動計算と容量調整

## 手入力による調整

- ブロックはあとから移動することができる
- ドラッグ&ドロップでタスクブロックを日付間で移動可能
- 完了していないタスクブロックのみドラッグ可能
- 移動時の視覚的フィードバック（ハイライト、回転エフェクト）

## 完了項目のチェック

- 完了したブロックはチェックして完了表示にできる
- 完了したブロックは視覚的に区別される（透明度変更、チェックマーク表示）
- プロジェクト全体の進捗率をリアルタイム表示

## 技術仕様

- React + Vite + TypeScript
- TailwindCSS でスタイリング
- ローカルストレージでデータ永続化
- レスポンシブデザイン対応

### アーキテクチャ

- **フロントエンド**: React 18 + TypeScript（関数コンポーネント + Hooks）
- **ビルドツール**: Vite 6.x
- **スタイリング**: TailwindCSS v4
- **状態管理**: React Hooks（useState, useReducer）+ Context
- **データ永続化**: Local Storage による専用キーでの管理
- **ルーティング**: SPA（Single Page Application）

### データ構造

- **プロジェクト**: ID、名前、期限、作成・更新日時
- **カテゴリー**: ID、プロジェクトID、名前、値範囲、期限、最小単位
- **週間設定**: プロジェクトID、各曜日の作業量設定
- **タスクブロック**: ID、カテゴリーID、作業量、完了状態、日付

### 主要機能

- **プロジェクト管理**: CRUD操作、進捗管理
- **カテゴリー管理**: 作業分類、期限・単位設定
- **週間設定**: 曜日別作業量調整（4段階）
- **自動計画生成**: アルゴリズムによる最適配分
- **カレンダー表示**: 月次ビュー、タスクブロック表示
- **ドラッグ&ドロップ**: 直感的なタスク移動
- **進捗管理**: リアルタイム進捗率、完了状態管理

### 開発・テスト環境

- **Linter**: ESLint（Flat Config対応）
- **フォーマッター**: Prettier
- **テスト**: Vitest + React Testing Library
- **カバレッジ**: Vitest内蔵カバレッジ機能

## ユーザーインターフェース

### プロジェクト一覧画面

- プロジェクト作成・編集・削除機能
- プロジェクト毎の進捗率表示
- 期限までの残り日数表示
- 更新日時順でのソート表示

### プロジェクト詳細画面

- プロジェクト情報表示（進捗率、残り日数、カテゴリー数）
- カテゴリー管理パネル（追加・編集・削除、進捗表示）
- 曜日別配分設定フォーム（スライダーUI、リアルタイムプレビュー）
- 自動計画生成パネル（バリデーション、生成オプション）
- 月次カレンダービュー（タスクブロック表示、ドラッグ&ドロップ対応）

### カレンダー機能

- **月次ナビゲーション**: 前月・次月・今日ボタン
- **日付セル**: 各日のタスクブロック表示、進捗バー
- **タスクブロック**: カテゴリー色分け、完了状態表示、ドラッグハンドル
- **凡例**: 進捗バー、完了マーク、ドラッグ操作の説明

### レスポンシブ対応

- **デスクトップ**: 2カラムレイアウト、フルカレンダー表示
- **タブレット**: 1カラムレイアウト、コンパクトカレンダー
- **モバイル**: スタックレイアウト、タッチ操作最適化

## 開発・テスト

### 開発環境

```bash
npm install
npm run dev
```

### テスト実行

```bash
# 全テスト実行
npm run test

# テスト監視モード
npm run test:ui

# 型チェック
npm run typecheck

# Lint実行
npm run lint

# フォーマット実行
npm run format
```

### ビルド・デプロイ

```bash
# 本番ビルド
npm run build

# ビルド結果プレビュー
npm run preview
```

## テスト戦略・品質保証

### テストアーキテクチャ

本アプリケーションは包括的なテスト戦略により高品質を保証しています：

- **総テスト数**: 253個のテスト
- **テスト成功率**: 100%（253/253テスト成功）
- **主要機能**: 完全網羅
- **品質チェック**: ESLint・TypeScriptエラーゼロ

### テスト分類・構成

#### 1. Services層の単体テスト（58テスト）
- **対象**: データ管理・ビジネスロジック
- **範囲**: ProjectService、CategoryService、PlanningService
- **検証項目**: CRUD操作、バリデーション、エラーハンドリング

#### 2. カスタムフックテスト（78テスト）
- **対象**: React Hooks（useProjects、useCategories、etc）
- **範囲**: 状態管理、API連携、リアクティブ更新
- **検証項目**: データ取得・更新・削除、ローディング状態、エラー処理

#### 3. コンポーネントテスト（111テスト）
- **対象**: UI コンポーネント
- **範囲**: ProjectList、CategoryList、Modal、TaskBlock、CalendarDay
- **検証項目**: レンダリング、イベントハンドリング、プロップス、条件分岐

#### 4. インテグレーションテスト（6テスト）
- **対象**: コンポーネント間連携
- **範囲**: 基本ユーザーフロー、画面遷移、データ永続化
- **検証項目**: エンドツーエンドの機能動作、UI連携

### アクセシビリティ対応

#### 実装済み機能
- **ARIA属性**: 適切な role、aria-label 設定
- **キーボード操作**: Tab順序、Escapeキー対応
- **フォームアクセシビリティ**: ラベル関連付け、エラー表示
- **進捗表示**: スクリーンリーダー対応の進捗情報
- **フォーカス管理**: モーダル内での適切なフォーカス制御

#### 対応要素
- モーダルダイアログ（キーボードナビゲーション）
- プロジェクト・カテゴリー一覧（ARIA attributes）
- フォーム要素（適切なラベル付け）
- 進捗バー（読み取り可能な形式）

### 品質管理

#### 自動化された品質チェック
- **ESLint**: コード品質・一貫性チェック
- **TypeScript**: 型安全性保証
- **Prettier**: コードフォーマット統一
- **Vitest**: 自動テスト実行・レポート

#### 継続的品質保証
- 全テスト通過が開発・デプロイの前提条件
- 型エラー・Lintエラーゼロでの品質維持
- コードレビュー時の自動品質確認
- テストカバレッジによる機能保証

### テスト実行・品質確認コマンド

```bash
# 全品質チェック（推奨）
npm run lint && npm run typecheck && npm run test

# 個別実行
npm run test        # テスト実行
npm run typecheck   # 型チェック
npm run lint        # コード品質チェック
npm run format      # コードフォーマット
```
