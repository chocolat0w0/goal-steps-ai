# Goal-Steps アプリケーション テスト計画

## プロジェクト概要
README.mdの仕様に沿った目標達成支援アプリケーションの包括的テスト戦略

## テスト計画の全体像

### 1. テスト環境の整備 ✅ **完了**
- [x] Vitest + React Testing Library セットアップ
- [x] LocalStorage モック機能
- [x] テスト用データフィクスチャ作成
- [x] カスタムレンダリングユーティリティ
- [x] カバレッジレポート設定

**作成ファイル:**
- `/src/test/setup.ts` - テスト環境設定
- `/src/test/utils.tsx` - カスタムレンダー関数
- `/src/test/mocks/localStorage.ts` - LocalStorageモック
- `/src/test/fixtures/testData.ts` - テスト用データ

### 2. Services層の単体テスト ✅ **完了**
- [x] ProjectService テスト (22個のテスト)
- [x] CategoryService テスト (19個のテスト)  
- [x] PlanningService テスト (12個のテスト)
- [x] バリデーション機能テスト
- [x] エラーハンドリングテスト

**作成ファイル:**
- `/src/lib/__tests__/ProjectService.test.ts`
- `/src/lib/__tests__/CategoryService.test.ts` 
- `/src/lib/__tests__/PlanningService.test.ts`

**テスト結果:** 58個のテスト全てが成功 ✅

### 3. カスタムフックのテスト 🔄 **次のタスク**
**対象ファイル:**
- `useProjects` - プロジェクト管理フック
- `useCategories` - カテゴリー管理フック
- `useWeeklySettings` - 週間設定管理フック
- `useTaskBlocks` - タスクブロック管理フック

**テスト予定項目:**
- データ取得・更新・削除の動作確認
- ローディング状態の管理
- エラーハンドリング
- リアクティブな状態更新
- 依存関係の管理

**作成予定ファイル:**
- `/src/hooks/__tests__/useProjects.test.ts`
- `/src/hooks/__tests__/useCategories.test.ts`
- `/src/hooks/__tests__/useWeeklySettings.test.ts`
- `/src/hooks/__tests__/useTaskBlocks.test.ts`

### 4. コンポーネントテスト 🔧 **計画中**
**対象コンポーネント:**

#### 基本コンポーネント:
- `Layout` - レイアウト構造
- `Modal` - モーダルダイアログ
- `ProjectForm` - プロジェクト作成・編集フォーム
- `CategoryForm` - カテゴリー作成・編集フォーム

#### 一覧表示コンポーネント:
- `ProjectList` - プロジェクト一覧
- `CategoryList` - カテゴリー一覧

#### 設定コンポーネント:
- `WeeklySettingsForm` - 曜日別作業量設定
- `PlanningPanel` - 自動計画生成パネル

#### カレンダーコンポーネント:
- `Calendar` - メインカレンダー表示
- `CalendarDay` - 日付セル
- `TaskBlock` - タスクブロック表示

#### ページコンポーネント:
- `ProjectDetailPage` - プロジェクト詳細画面

**テスト予定項目:**
- レンダリングテスト
- プロップス受け渡しテスト
- イベントハンドリングテスト
- 条件分岐レンダリングテスト
- フォームバリデーションテスト
- ドラッグ&ドロップ機能テスト

### 5. インテグレーションテスト 🔧 **計画中**
**テストシナリオ:**

#### プロジェクト管理フロー:
- プロジェクト作成 → カテゴリー追加 → 週間設定 → 計画生成 → 完了管理

#### データ永続化フロー:
- LocalStorage保存・読み込みの整合性確認
- 複数プロジェクト間でのデータ分離確認

#### UI連携フロー:
- フォーム送信 → 一覧更新 → 詳細表示の連携確認
- モーダル表示 → データ更新 → モーダル閉じる → 一覧反映

#### カレンダー機能フロー:
- 計画生成 → カレンダー表示 → ドラッグ&ドロップ → 完了切り替え

### 6. アクセシビリティテスト 🔧 **計画中**
**テスト項目:**

#### キーボード操作:
- Tab順序の適切性
- Enter/Spaceキーでの操作可能性
- Escapeキーでのモーダル閉じる機能

#### スクリーンリーダー対応:
- ARIA属性の適切な設定
- フォームラベルの関連付け
- 動的コンテンツの読み上げ対応

#### 視覚的アクセシビリティ:
- カラーコントラスト比の確認
- フォーカス表示の視認性
- 状態変化の視覚的フィードバック

#### 操作性:
- ドラッグ&ドロップの代替手段
- タッチデバイスでの操作性
- エラーメッセージの分かりやすさ

## テスト戦略とツール

### 使用技術:
- **テストフレームワーク:** Vitest
- **コンポーネントテスト:** React Testing Library  
- **アクセシビリティテスト:** @testing-library/jest-dom
- **カバレッジ:** Vitest内蔵カバレッジ機能

### テスト品質指標:
- **カバレッジ目標:** 80%以上
- **テスト成功率:** 100%
- **テスト実行時間:** 30秒以内

## 進捗状況

### ✅ 完了 (2024年9月時点)
1. **テスト環境の整備** - テスト基盤とユーティリティ構築完了
2. **Services層の単体テスト** - 58個のテスト作成・全て成功

### 🔄 次のマイルストーン
3. **カスタムフックのテスト** - React Hooksの動作確認とState管理テスト

### 📋 今後の予定
4. **コンポーネントテスト** - UI コンポーネントの動作確認
5. **インテグレーションテスト** - エンドツーエンドの機能フロー確認  
6. **アクセシビリティテスト** - ユーザビリティと包括性の確認

## 期待される成果

### 品質保証:
- バグの早期発見・修正
- リファクタリング時の安全性確保
- 新機能追加時の既存機能への影響確認

### 開発効率:
- 自動テストによる手動テスト時間削減
- 継続的インテグレーションでの品質維持
- コードレビュー時の品質確認支援

### ユーザー体験:
- 安定した動作の保証
- アクセシビリティ要件の満足
- 期待通りの機能提供